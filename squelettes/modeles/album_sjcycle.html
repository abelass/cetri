[(#REM)
	Modèle Sjcycle pour Album
	dans un squelette : CROCHET(# MODELE{album_sjcycle}{id_album=XX})CROCHET
]

<div class="tag-box tag-box-v3">
	<p><button type="button" class="close" data-dismiss="alert">×</button></p>



<B_album>
[(#REM|test_espace_prive|oui)
	[(#INCLURE{fond=prive/squelettes/inclure/albums_modele_infos_prive, id_album, js=oui})]
]

<BOUCLE_album(ALBUMS){id_album}{statut == #REM|test_espace_prive|?{.*,#ENV{statut,publie}}}>

#SET{id_diapo,   	  	#ENV{id_diapo,       		#VAL{id_}|uniqid}}
#SET{img_width,      		#ENV{width,     		#CONFIG{sjcycle/img_width}}}
#SET{img_height,     		#ENV{height,    		#CONFIG{sjcycle/img_height}}}
#SET{img_position,   		#ENV{position,  		#CONFIG{sjcycle/img_position}}}
#SET{img_background, 		#ENV{background,		#CONFIG{sjcycle/img_background}}}
#SET{div_background, 		#ENV{border_color,   		#CONFIG{sjcycle/div_background}}}
#SET{div_margin,     		#ENV{div_margin,   	 	#CONFIG{sjcycle/div_margin}}}
#SET{img_bordure,    		#ENV{border_width,   		#CONFIG{sjcycle/img_bordure}}}
#SET{legende,        		#ENV{legende,        		0}}
#SET{liens_individuels,		#ENV{liens_individuels,		0}}
[(#REM) largeur div = largeur image + 2*bordure ]
#SET{div_width,			#GET{img_bordure}|mult{2}|plus{#GET{img_width}}}


[(#REM) Je ne sais plus a quoi ca sert, mais ca gene pour l'affichage des legendes a partir des titres des documents 
	C'etait auparavant dans le style de la div principale ]
#SET{div_height, #GET{img_bordure}|mult{2}|plus{#GET{img_height}} }

#SET{cssbox, #EVAL{8}|randomString}

<script type="text/javascript">/*<!#EVAL{chr(91)}CDATA#EVAL{chr(91)}*/
[(#REM) on ne charge pas le script dans l espace privé ]
[(#REM|test_espace_prive|non)
	$(document).ready(function() {
		[(#CONFIG{sjcycle/tooltip}|=={on}|oui)
			$('.infobulle').tooltip({
				bodyHandler: function() {
					return $($(this).children(".textinfobulle")).html();
				},
				track: true,
				delay: 0,
				showURL: false,
				opacity: 1,
				fixPNG: true,
				extraClass: "pretty",
				top: -15,
				left: 5
			});
		]
		[(#CONFIG{sjcycle/mediabox}|=={on}|oui)
			$("a.#GET{cssbox}").mediabox(box_settings);
		]
		$("#dsjcycle_#GET{id_diapo}").cycle({
			 fx:		"#CONFIG{sjcycle/fx}",
			 timeout:	"#CONFIG{sjcycle/timeout}",
			 speed:		"#CONFIG{sjcycle/speed}",
			 sync:		"#CONFIG{sjcycle/sync}",
			 pause:		"#CONFIG{sjcycle/pause}",
			 random:	"#CONFIG{sjcycle/random}",
			 cleartype: 1
			 [,(#ENV*{opt}|replace{';',','}|html_entity_decode)]
			 });
	});
]
/*#EVAL{chr(93)}[(#EVAL{chr(93)})]>*/</script>

[(#REM) diaporama documents images conteneur jquery cycle ]
[(#SET{style,[float:(#ENV{align}|match{left|right});margin:[(#GET{div_margin})]px;][width:(#GET{div_width})px;][background:(#GET{div_background})]})]

<B_img>

<div class="#CONFIG{sjcycle/div_class}" id="dsjcycle_#GET{id_diapo}" style='#GET{style}'>

[(#REM) Solution de denisb pour eviter de dupliquer le code Cf http://article.gmane.org/gmane.comp.web.spip.zone/18622 ]
<BOUCLE_img(DOCUMENTS){id_album}{extension==jpg|png|gif}{id_document==^((#ENV{docs}|replace{',',|}|sinon{.*}))$}{par #ENV{par}}{par num titre, date}{doublons}{0, #REM|test_espace_prive|?{1,#ENV{limite,1000}}}{tout}>
<div>
[(#REM) Les effets de type turnLeft ne fonctionnent pas si ce div est en place. En attendant de corriger
rajout dans la doc de l'incompatibilite entre infobulles et ces effets. Du coup la bordure autour de l'image
ne se met pas en place non plus ]
#SET{fermer_a,non}
 

<a href="#DOCUMENT_URL">


[(#GET{img_background}|=={'transparent'}|oui)
[(#FICHIER|image_passe_partout{#GET{img_width},#GET{img_height}}
	|image_alpha{0}
	|image_recadre{#GET{img_width},#GET{img_height},#GET{img_position},#GET{img_background}}
	|inserer_attribut{alt,[(#TITRE|supprimer_numero|attribut_html)]}
	|inserer_attribut{style,"display:block;"}
	|inserer_attribut{class,img-responsive}



	)]
]
[(#GET{img_background}|=={'transparent'}|non)
[(#FICHIER|image_passe_partout{#GET{img_width},#GET{img_height}}
	|image_recadre{#GET{img_width},#GET{img_height},#GET{img_position},#GET{img_background}}
	|inserer_attribut{alt,[(#TITRE|supprimer_numero|attribut_html)]}
	|inserer_attribut{style,"display:block;"}
	|inserer_attribut{class,img-responsive})]
]
[(#GET{fermer_a}|=={oui}|oui)</a>]

</div>
</BOUCLE_img>
</div><!-- sjcycle-->

[(#GET{legende}|oui|et{#GET{legende}|=={modele}|oui})
[(#REM) La legende est cree a partir du modele sjcycle_legende ]
[<div class="sjcycle_legende"  style='#GET{style}'>(#MODELE{sjcycle_legende}{id_article=#GET{id_objet}})</div>]
]

[(#GET{legende}|oui|et{#GET{legende}|=={1}|non}|et{#GET{legende}|=={modele}|non})
[(#REM) La legende est cree a partir du texte fourni ]
[<div class="sjcycle_legende"  style='#GET{style}'>(#GET{legende})</div>]
]

</B_img>
</BOUCLE_album>

	</div>
</div>
